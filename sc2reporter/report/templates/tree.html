
<html>
<script src="{{url_for('static', filename='js/jquery-1.9.1.min.js')}}"></script>
<script src="{{url_for('static', filename='js/d3.min.js')}}"></script>
<script src="{{url_for('static', filename='js/base_tree.js')}}"></script>
<script src="{{url_for('static', filename='js/d3_m_tree.js')}}"></script>
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"> -->
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='treeStyle.css') }}">


<div id="sidebar">
<button class="first-ele"  id="nodeLabels">Show Labels</button>
<button class="first-ele" id="colourNodes">Colour nodes</button>
<select name="metaOption" id="metaCats" method="GET">
        {% for ele in tree['metadata_list'] %}
        <option value= "{{ ele }}" SELECTED>{{ ele }}</option>
        {% endfor %}
</select>
</div>


<div id="tree-holder"></div>

<script>

var data = {{ tree|safe }}
const nodeLabels = document.getElementById('nodeLabels');  
const nodeColourButton = document.getElementById('colourNodes');  
const nodeColourDropdown = document.getElementById('metaCats');  


var tree = new D3MSTree("tree-holder",data);

var showLabels = false

tree.centerGraph();
tree.changeCategory('time')



// Shows or hides all labels when nodeLabels button is pressed
nodeLabels.addEventListener('click', ()=> {
        showLabels = !showLabels
        tree.showNodeLabels(showLabels);
        tree.showLinkLabels(showLabels);
})

nodeColourButton.addEventListener('click', ()=> {
        var metaCat = nodeColourDropdown.options[nodeColourDropdown.selectedIndex].value;
        tree.changeCategory(metaCat)
})

</script>

</html>